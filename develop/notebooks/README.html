<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Python API" href="../api/index.html" /><link rel="prev" title="Pipeline Reference" href="../parameter_blueprints.html" />

    <meta name="generator" content="sphinx-4.1.2, furo 2021.08.31"/>
        <title>Notebooks - bio_embeddings</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=c7c65a82b42f6b978e58466c1e9ef2509836d916" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">bio_embeddings</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">bio_embeddings</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://github.com/sacdallago/bio_embeddings/tree/develop/examples">Pipeline Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameter_blueprints.html">Pipeline Reference</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Notebooks</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">Python API</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/bio_embeddings.embed.html">bio_embeddings.embed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/bio_embeddings.extract.html">bio_embeddings.extract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/bio_embeddings.mutagenesis.html">bio_embeddings.mutagenesis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/bio_embeddings.project.html">bio_embeddings.project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/bio_embeddings.utilities.html">bio_embeddings.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/bio_embeddings.visualize.html">bio_embeddings.visualize</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../contributing/index.html">Contributing</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/setup.html">Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/extract.html">Implement a new predictor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/embedder.html">Add a new language model/embedder</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <article role="main">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <div class="tex2jax_ignore mathjax_ignore section" id="notebooks">
<h1>Notebooks<a class="headerlink" href="#notebooks" title="Permalink to this headline">¶</a></h1>
<p>The notebooks in this folder can be executed locally on your machine or on Google Colab (a tool that allows you to run code online). If you run the Notebooks on your own machine, you might ignore the “Colab Initialization” code, but you will have to download the files required by the notebook. If you do run the Notebooks on Colab, you have to execute commands to install the pipeline and download neccessary files, which are the blocks of code followin the “Colab Initialization” header.</p>
<div class="section" id="preface">
<h2>Preface<a class="headerlink" href="#preface" title="Permalink to this headline">¶</a></h2>
<p>From experience within our lab and with collaborators we have created a set of Notebooks that try to address different aspects of what is generally needed. The Notebooks presented here are to be viewed as “building blocks” for your exploratory projects! We’ve tried to keep the notebooks short and to the point. Often, you will need to grab a thing from here and a thing from there.</p>
</div>
<div class="section" id="from-the-manuscript">
<h2>From the manuscript<a class="headerlink" href="#from-the-manuscript" title="Permalink to this headline">¶</a></h2>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Colab</p></th>
<th class="text-align:left head"><p>Notebook</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Basic Protocol 2 and alternates: use deeploc embeddings produced by the pipeline to plot sequence spaces. This is virtually the same as <span class="xref myst">this pipeline example</span>, but here we can tune the UMAP parameters until we obtain a nice graphic to put in a presentation :) .</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/deeploc_visualizations.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="deeploc_visualizations.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Basic Protocol 3: train a simple machine learning classifier to predict subcellular localizations training on <span class="xref myst">DeepLoc embeddings</span>.</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/deeploc_machine_learning.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="deeploc_machine_learning.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="exploring-modules-from-the-bio-embeddings-package">
<h2>Exploring modules from the <code class="docutils literal notranslate"><span class="pre">bio_embeddings</span></code> package<a class="headerlink" href="#exploring-modules-from-the-bio-embeddings-package" title="Permalink to this headline">¶</a></h2>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Colab</p></th>
<th class="text-align:left head"><p>Notebook</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Use the general purpose embedding objects to embed a sequence passed as string</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/embed_custom_sequence.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="embed_custom_sequence.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Use <code class="docutils literal notranslate"><span class="pre">Bio</span></code> to load a FASTA file and the general purpose embedding objects to embed sequences from the file</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/embed_fasta_sequences.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="embed_fasta_sequences.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>Embed a sequence and extract annotations using supervised models from <code class="docutils literal notranslate"><span class="pre">bio_embeddings.extract</span></code>. You can achieve the same results using the pipeline like in <span class="xref myst">this example</span>.</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/extract_supervised_from_seqvec.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="extract_supervised_from_seqvec.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Embed a sequence and transfer GO annotations using unsupervised techniques found in <code class="docutils literal notranslate"><span class="pre">bio_embeddings.extract</span></code> (vistually the same as <a class="reference external" href="https://github.com/Rostlab/goPredSim/">goPredSim</a>). You can achieve the same results using the pipeline like in <span class="xref myst">this example</span>.</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/goPredSim.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="goPredSim.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="proper-use-cases-from-collaborations">
<h2>Proper use cases from collaborations<a class="headerlink" href="#proper-use-cases-from-collaborations" title="Permalink to this headline">¶</a></h2>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Colab</p></th>
<th class="text-align:left head"><p>Notebook</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Embed a few sequences and try out different ideas to see if the embeddings are able to cluster different sequences</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/project_visualize_custom_embedings.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="project_visualize_custom_embeddings.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="exploring-pipeline-output-files">
<h2>Exploring pipeline output files<a class="headerlink" href="#exploring-pipeline-output-files" title="Permalink to this headline">¶</a></h2>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Colab</p></th>
<th class="text-align:left head"><p>Notebook</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Open an embedding file, the principal output of a pipeline run</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/open_embedding_file.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="open_embedding_file.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Use embeddings produced by the pipeline to plot sequence spaces. This is virtually similar to using the <code class="docutils literal notranslate"><span class="pre">project</span></code> and <code class="docutils literal notranslate"><span class="pre">visualize</span></code> steps of the pipeline, but in this case, you can change paramteres on the fly in the Notebook. A similar pipeline example <span class="xref myst">here</span>.</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/project_visualize_pipeline_embeddings.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="project_visualize_pipeline_embeddings.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>Use deeploc embeddings produced by the pipeline to plot sequence spaces. This is virtually the same as <span class="xref myst">this pipeline example</span>, but here we can tune the UMAP parameters until we obtain a nice graphic to put in a presentation :) .</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/deeploc_visualizations.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="deeploc_visualizations.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Analyze embedding sets by studying their similarity and transferring annotations</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/pairwise_distances_and_nearest_neighbours.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="pairwise_distances_and_nearest_neighbours.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>Naïvely plot embeddings to distinguish patterns in your embedded sequences</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/per_amino_acid_embedding_visualization.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="per_amino_acid_embedding_visualization.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="advanced-use-cases">
<h2>Advanced use cases<a class="headerlink" href="#advanced-use-cases" title="Permalink to this headline">¶</a></h2>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Colab</p></th>
<th class="text-align:left head"><p>Notebook</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Train a simple machine learning classifier to predict subcellular localizations training on <span class="xref myst">DeepLoc embeddings</span>.</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/deeploc_machine_learning.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="deeploc_machine_learning.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<div class="table-wrapper"><table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Purpose</p></th>
<th class="head"><p>Colab</p></th>
<th class="text-align:left head"><p>Notebook</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Re-index an <code class="docutils literal notranslate"><span class="pre">embeddings_file</span></code> using your original identifiers. Useful when creating reference embedding sets for the unsupervised <code class="docutils literal notranslate"><span class="pre">extract</span></code> stage</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/reindex_h5_file.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="reindex_h5_file.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Remove identifiers from an annotation file, useful when the pipeline suggest you to do so! :)</p></td>
<td><p><a class="reference external" href="https://colab.research.google.com/github/sacdallago/bio_embeddings/blob/develop/notebooks/remove_identifiers_from_annotation_file.ipynb">Click here</a></p></td>
<td class="text-align:left"><p><a class="reference internal" href="remove_identifiers_from_annotation_file.html"><span class="doc std std-doc">Click here</span></a></p></td>
</tr>
</tbody>
</table></div>
</div>
<div class="section" id="output-files">
<h2>Output files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h2>
<p>The h5 files created by the embed and project stages store the embeddings as key-value-pairs (like a python dict). With the defaults, the key is a unique hash of the sequence (md5). If you chose <code class="docutils literal notranslate"><span class="pre">simple_remapping:</span> <span class="pre">True</span></code> instead, it’s the position of the sequence in the fasta file. You can get the original id from the fasta file through the <code class="docutils literal notranslate"><span class="pre">original_id</span></code> attribute, i.e. with <code class="docutils literal notranslate"><span class="pre">.attrs["original_id"]</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s2">"path/to/file.h5"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">sequence_id</span><span class="p">,</span> <span class="n">embedding</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"id: </span><span class="si">{</span><span class="n">sequence_id</span><span class="si">}</span><span class="s2">, "</span>
            <span class="sa">f</span><span class="s2">"original id: </span><span class="si">{</span><span class="n">embedding</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">'original_id'</span><span class="p">]</span><span class="si">}</span><span class="s2">, "</span>
            <span class="sa">f</span><span class="s2">"embeddings mean: </span><span class="si">{</span><span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">embedding</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>Example with default remapping (<code class="docutils literal notranslate"><span class="pre">simple_remapping:</span> <span class="pre">False</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span><span class="p">:</span> <span class="mi">582</span><span class="n">c3fb2d88b268dc5690ea5397062ef</span><span class="p">,</span> <span class="n">original</span> <span class="nb">id</span><span class="p">:</span> <span class="mi">153</span><span class="n">lA00</span><span class="p">,</span> <span class="n">embeddings</span> <span class="n">mean</span><span class="p">:</span> <span class="mf">6.362990856170654</span>
<span class="nb">id</span><span class="p">:</span> <span class="mi">70</span><span class="n">de5a8a1677bbf5c3b29b5becc80410</span><span class="p">,</span> <span class="n">original</span> <span class="nb">id</span><span class="p">:</span> <span class="mi">16</span><span class="n">pkA02</span><span class="p">,</span> <span class="n">embeddings</span> <span class="n">mean</span><span class="p">:</span> <span class="mf">6.845481872558594</span>
<span class="nb">id</span><span class="p">:</span> <span class="mi">9</span><span class="n">aa52af02444afd9e69d7a12f6ae7ef4</span><span class="p">,</span> <span class="n">original</span> <span class="nb">id</span><span class="p">:</span> <span class="mi">16</span><span class="n">vpA00</span><span class="p">,</span> <span class="n">embeddings</span> <span class="n">mean</span><span class="p">:</span> <span class="mf">6.108543872833252</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">simple_remapping:</span> <span class="pre">True</span></code> (note that the order is not numerical):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">original</span> <span class="nb">id</span><span class="p">:</span> <span class="n">Q09165</span><span class="p">,</span> <span class="n">embeddings</span> <span class="n">mean</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.00168827164452523</span>
<span class="nb">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">original</span> <span class="nb">id</span><span class="p">:</span> <span class="n">Q5VST9</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="n">embeddings</span> <span class="n">mean</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.00138779915869236</span>
<span class="nb">id</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">original</span> <span class="nb">id</span><span class="p">:</span> <span class="n">O75592</span><span class="p">,</span> <span class="n">embeddings</span> <span class="n">mean</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.0018009127816185355</span>
<span class="nb">id</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="n">original</span> <span class="nb">id</span><span class="p">:</span> <span class="n">P83741</span><span class="p">,</span> <span class="n">embeddings</span> <span class="n">mean</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.0006061643362045288</span>
</pre></div>
</div>
<p>Additionally, we provide <a class="reference external" href="../api/bio_embeddings.utilities.html#bio_embeddings.utilities.QueryEmbeddingsFile"><code class="docutils literal notranslate"><span class="pre">QueryEmbeddingsFile</span></code></a> for convenient lookup from the original id.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">from</span> <span class="nn">bio_embeddings.utilities</span> <span class="kn">import</span> <span class="n">QueryEmbeddingsFile</span>

<span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s2">"path/to/file.h5"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">embedding_querier</span> <span class="o">=</span> <span class="n">QueryEmbeddingsFile</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">embedding_querier</span><span class="o">.</span><span class="n">query_original_id</span><span class="p">(</span><span class="s2">"Some_Database_ID_1234"</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../api/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Python API</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../parameter_blueprints.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Pipeline Reference</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2020, Christian Dallago, Konstantin Schütze, Michael Heinzinger, Tobias Olenyi
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/notebooks/README.md.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Notebooks</a><ul>
<li><a class="reference internal" href="#preface">Preface</a></li>
<li><a class="reference internal" href="#from-the-manuscript">From the manuscript</a></li>
<li><a class="reference internal" href="#exploring-modules-from-the-bio-embeddings-package">Exploring modules from the <code class="docutils literal notranslate"><span class="pre">bio_embeddings</span></code> package</a></li>
<li><a class="reference internal" href="#proper-use-cases-from-collaborations">Proper use cases from collaborations</a></li>
<li><a class="reference internal" href="#exploring-pipeline-output-files">Exploring pipeline output files</a></li>
<li><a class="reference internal" href="#advanced-use-cases">Advanced use cases</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a></li>
<li><a class="reference internal" href="#output-files">Output files</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    </body>
</html>